public class Spellbook {
	
//	static let schoolNames = ["Abjuration", "Conjuration", "Divination", "Enchantment", "Evocation", "Illusion", "Necromancy", "Transmutation"]
//	static let casterNames = ["Bard", "Cleric", "Druid", "Paladin", "Ranger", "Sorcerer", "Warlock", "Wizard"]
//	static let subclassNames = ["Berserker", "Devotion", "Draconic", "Evocation", "Fiend", "Hunter", "Land", "Life", "Lore", "Open Hand", "Thief"]
//	static let sourcebookCodes = ["phb", "xge", "scag"]
//    static let sourcebookNames = ["Player's Handbook", "Xanathar's Guide to Everything", "Sword Coast AG"]
//
//	static let N_SCHOOLS = schoolNames.count
//	static let N_CASTERS = casterNames.count
//	static let N_SUBCLASSES = subclassNames.count
    
    static let MIN_SPELL_LEVEL = 0
    static let MAX_SPELL_LEVEL = 9
    
    static let SECOND_PER_ROUND = 6
    
    static let SCAG_CANTRIPS = [ "Booming Blade", "Green-Flame Blade", "Lightning Lure", "Sword Burst" ]

	var spells: Array<Spell>
	var N_SPELLS: Int
    
    init(spells: Array<Spell> = []) {
        self.spells = spells
        self.N_SPELLS = spells.count
    }

    convenience init(jsonStr: String) {
        let spells = parseSpellList(jsonStr: jsonStr)
        self.init(spells: spells)
    }
    
    static func spellsLinked(_ first: Spell, _ second: Spell) -> Bool {
        return spellIDLinks.linkExists(first.id, second.id)
    }
    
    static func linkedSpellID(for spell: Spell) -> Int? {
        return spellIDLinks.getKey(spell.id) ?? spellIDLinks.getValue(spell.id)
    }
    
    static let spellIDLinks: BidirectionalMap<Int,Int> = {
        let map = BidirectionalMap<Int,Int>()
        map.put(243, 782)
        map.put(144, 678)
        map.put(353, 910)
        map.put(214, 751)
        map.put(354, 911)
        map.put(55, 587)
        map.put(247, 785)
        map.put(136, 670)
        map.put(298, 839)
        map.put(299, 840)
        map.put(184, 719)
        map.put(41, 572)
        map.put(110, 644)
        map.put(305, 847)
        map.put(284, 824)
        map.put(125, 660)
        map.put(143, 677)
        map.put(158, 693)
        map.put(276, 816)
        map.put(258, 798)
        map.put(335, 892)
        map.put(312, 854)
        map.put(291, 831)
        map.put(213, 750)
        map.put(54, 586)
        map.put(313, 855)
        map.put(165, 700)
        map.put(22, 553)
        map.put(283, 823)
        map.put(87, 619)
        map.put(265, 805)
        map.put(472, 866)
        map.put(7, 537)
        map.put(88, 620)
        map.put(250, 789)
        map.put(257, 797)
        map.put(434, 857)
        map.put(220, 757)
        map.put(61, 593)
        map.put(349, 907)
        map.put(172, 707)
        map.put(242, 781)
        map.put(221, 758)
        map.put(290, 830)
        map.put(62, 594)
        map.put(94, 626)
        map.put(334, 891)
        map.put(35, 567)
        map.put(14, 544)
        map.put(95, 627)
        map.put(264, 804)
        map.put(36, 568)
        map.put(227, 764)
        map.put(68, 600)
        map.put(316, 860)
        map.put(6, 536)
        map.put(380, 643)
        map.put(249, 788)
        map.put(21, 552)
        map.put(228, 765)
        map.put(69, 601)
        map.put(341, 898)
        map.put(102, 634)
        map.put(202, 739)
        map.put(342, 899)
        map.put(28, 559)
        map.put(475, 870)
        map.put(76, 608)
        map.put(109, 642)
        map.put(441, 886)
        map.put(139, 673)
        map.put(327, 882)
        map.put(272, 812)
        map.put(447, 902)
        map.put(333, 889)
        map.put(131, 665)
        map.put(231, 770)
        map.put(194, 730)
        map.put(246, 786)
        map.put(179, 714)
        map.put(297, 837)
        map.put(279, 819)
        map.put(120, 655)
        map.put(201, 738)
        map.put(356, 913)
        map.put(322, 875)
        map.put(153, 688)
        map.put(271, 811)
        map.put(75, 607)
        map.put(13, 543)
        map.put(43, 574)
        map.put(326, 881)
        map.put(307, 849)
        map.put(286, 826)
        map.put(127, 662)
        map.put(208, 745)
        map.put(49, 581)
        map.put(308, 850)
        map.put(160, 695)
        map.put(230, 769)
        map.put(278, 818)
        map.put(209, 746)
        map.put(50, 582)
        map.put(82, 614)
        map.put(260, 800)
        map.put(2, 532)
        map.put(83, 615)
        map.put(293, 833)
        map.put(215, 752)
        map.put(355, 912)
        map.put(56, 588)
        map.put(237, 776)
        map.put(216, 753)
        map.put(285, 825)
        map.put(57, 589)
        map.put(89, 621)
        map.put(138, 672)
        map.put(186, 721)
        map.put(300, 841)
        map.put(30, 562)
        map.put(238, 777)
        map.put(42, 573)
        map.put(90, 622)
        map.put(31, 563)
        map.put(222, 759)
        map.put(112, 646)
        map.put(1, 531)
        map.put(244, 783)
        map.put(16, 547)
        map.put(223, 760)
        map.put(64, 596)
        map.put(145, 679)
        map.put(336, 893)
        map.put(245, 784)
        map.put(97, 629)
        map.put(197, 734)
        map.put(337, 894)
        map.put(23, 554)
        map.put(252, 791)
        map.put(344, 901)
        map.put(159, 694)
        map.put(350, 908)
        map.put(189, 725)
        map.put(259, 799)
        map.put(63, 595)
        map.put(52, 585)
        map.put(292, 832)
        map.put(115, 650)
        map.put(196, 733)
        map.put(37, 569)
        map.put(397, 723)
        map.put(166, 701)
        map.put(317, 861)
        map.put(266, 806)
        map.put(38, 570)
        map.put(70, 602)
        map.put(167, 702)
        map.put(318, 862)
        map.put(8, 538)
        map.put(251, 790)
        map.put(71, 603)
        map.put(281, 821)
        map.put(203, 740)
        map.put(343, 900)
        map.put(104, 636)
        map.put(173, 708)
        map.put(273, 813)
        map.put(45, 577)
        map.put(174, 709)
        map.put(15, 545)
        map.put(96, 628)
        map.put(78, 610)
        map.put(210, 747)
        map.put(132, 666)
        map.put(310, 852)
        map.put(232, 771)
        map.put(438, 876)
        map.put(133, 667)
        map.put(181, 716)
        map.put(469, 863)
        map.put(103, 635)
        map.put(233, 772)
        map.put(122, 657)
        map.put(85, 617)
        map.put(357, 914)
        map.put(188, 724)
        map.put(29, 560)
        map.put(77, 609)
        map.put(239, 778)
        map.put(218, 755)
        map.put(140, 674)
        map.put(328, 883)
        map.put(240, 779)
        map.put(44, 575)
        map.put(51, 583)
        map.put(114, 648)
        map.put(195, 731)
        map.put(18, 549)
        map.put(147, 681)
        map.put(180, 715)
        map.put(280, 820)
        map.put(121, 656)
        map.put(148, 682)
        map.put(339, 896)
        map.put(154, 689)
        map.put(361, 920)
        map.put(345, 903)
        map.put(302, 843)
        map.put(217, 754)
        map.put(106, 639)
        map.put(155, 690)
        map.put(187, 722)
        map.put(346, 904)
        map.put(287, 827)
        map.put(128, 663)
        map.put(107, 640)
        map.put(309, 851)
        map.put(129, 664)
        map.put(113, 647)
        map.put(92, 624)
        map.put(161, 696)
        map.put(261, 801)
        map.put(331, 887)
        map.put(224, 761)
        map.put(162, 697)
        map.put(146, 680)
        map.put(3, 533)
        map.put(84, 616)
        map.put(294, 834)
        map.put(66, 598)
        map.put(198, 735)
        map.put(338, 895)
        map.put(99, 631)
        map.put(168, 703)
        map.put(58, 590)
        map.put(319, 872)
        map.put(268, 808)
        map.put(301, 842)
        map.put(169, 704)
        map.put(10, 540)
        map.put(320, 873)
        map.put(91, 623)
        map.put(360, 918)
        map.put(253, 792)
        map.put(25, 556)
        map.put(73, 605)
        map.put(32, 564)
        map.put(254, 793)
        map.put(17, 548)
        map.put(65, 597)
        map.put(467, 766)
        map.put(47, 579)
        map.put(98, 630)
        map.put(80, 612)
        map.put(39, 571)
        map.put(352, 909)
        map.put(24, 555)
        map.put(72, 604)
        map.put(267, 807)
        map.put(135, 669)
        map.put(323, 878)
        map.put(9, 539)
        map.put(235, 774)
        map.put(359, 917)
        map.put(454, 916)
        map.put(190, 726)
        map.put(205, 742)
        map.put(274, 814)
        map.put(175, 710)
        map.put(275, 815)
        map.put(116, 651)
        map.put(176, 711)
        map.put(117, 652)
        map.put(150, 685)
        map.put(134, 668)
        map.put(182, 717)
        map.put(234, 773)
        map.put(282, 822)
        map.put(123, 658)
        map.put(204, 741)
        map.put(183, 718)
        map.put(471, 865)
        map.put(105, 637)
        map.put(124, 659)
        map.put(156, 691)
        map.put(416, 767)
        map.put(46, 578)
        map.put(157, 692)
        map.put(329, 884)
        map.put(79, 611)
        map.put(348, 906)
        map.put(241, 780)
        map.put(289, 829)
        map.put(142, 676)
        map.put(211, 748)
        map.put(330, 885)
        map.put(311, 853)
        map.put(314, 858)
        map.put(212, 749)
        map.put(470, 864)
        map.put(372, 576)
        map.put(164, 699)
        map.put(315, 859)
        map.put(5, 535)
        map.put(86, 618)
        map.put(248, 787)
        map.put(149, 683)
        map.put(358, 915)
        map.put(340, 897)
        map.put(101, 633)
        map.put(219, 756)
        map.put(60, 592)
        map.put(141, 675)
        map.put(477, 871)
        map.put(303, 844)
        map.put(93, 625)
        map.put(304, 845)
        map.put(288, 828)
        map.put(108, 641)
        map.put(256, 795)
        map.put(19, 550)
        map.put(262, 802)
        map.put(163, 698)
        map.put(20, 551)
        map.put(4, 534)
        map.put(263, 803)
        map.put(295, 835)
        map.put(53, 584)
        map.put(296, 836)
        map.put(26, 557)
        map.put(473, 868)
        map.put(59, 591)
        map.put(269, 809)
        map.put(347, 905)
        map.put(170, 705)
        map.put(27, 558)
        map.put(11, 541)
        map.put(474, 869)
        map.put(270, 810)
        map.put(33, 565)
        map.put(171, 706)
        map.put(12, 542)
        map.put(255, 794)
        map.put(332, 888)
        map.put(34, 566)
        map.put(225, 762)
        map.put(193, 729)
        map.put(177, 712)
        map.put(226, 763)
        map.put(67, 599)
        map.put(229, 768)
        map.put(277, 817)
        map.put(118, 653)
        map.put(199, 736)
        map.put(178, 713)
        map.put(100, 632)
        map.put(119, 654)
        map.put(151, 686)
        map.put(200, 737)
        map.put(321, 874)
        map.put(152, 687)
        map.put(324, 879)
        map.put(74, 606)
        map.put(236, 775)
        map.put(137, 671)
        map.put(206, 743)
        map.put(185, 720)
        map.put(325, 880)
        map.put(306, 848)
        map.put(126, 661)
        map.put(207, 744)
        map.put(191, 727)
        map.put(48, 580)
        map.put(445, 890)
        map.put(111, 645)
        map.put(192, 728)
        map.put(81, 613)
        return map
    }()

}
